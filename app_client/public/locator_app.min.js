!function(){function o(o,t){o.when("/",{templateUrl:"components/home.view.html",controller:"homeCtrl"}).when("/addlocation",{templateUrl:"components/addLocation.view.html",controller:"addLocationCtrl",controllerAs:"vm"}).when("/locations/type/study",{templateUrl:"components/location_types/study.view.html",controller:"studyCtrl"}).when("/locations/type/work",{templateUrl:"components/location_types/work.view.html",controller:"workCtrl"}).when("/locations/type/dating",{templateUrl:"components/location_types/dating.view.html",controller:"datingCtrl"}).when("/location/:locationid",{templateUrl:"components/locationDetail.view.html",controller:"locationDetailCtrl",controllerAs:"vm"}).when("/aboutUs",{templateUrl:"components/aboutPage.view.html",controller:""}).when("/register",{templateUrl:"components/register.view.html",controller:"registerCtrl",controllerAs:"vm"}).when("/login",{templateUrl:"components/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"}),t.html5Mode(!0)}angular.module("locator_app",["ngRoute"]),o.$inject=["$routeProvider","$locationProvider"],angular.module("locator_app").config(["$routeProvider","$locationProvider",o])}(),function(){angular.module("locator_app").controller("homeCtrl",function(){})}(),function(){function o(o){let t=this;t.openingTimes=[],t.pushDefaultOpeningTime=(()=>{t.openingTimes.push({day:null,state:!1,open:null,close:null})}),t.onSubmit=(()=>{let e=t.formData;if(!(e&&e.name&&e.type&&e.address&&e.rating&&e.longitude&&e.latitude&&e.discount&&e.imageLink&&0!=t.openingTimes.length))return void alert("All fields are required!");let n=[];if(t.formData.checkboxFood&&n.push("Food"),t.formData.checkboxSilence&&n.push("Silence"),t.formData.checkboxWifi&&n.push("Premium Wifi"),t.formData.checkboxOutdoor&&n.push("Outdoor"),t.formData.checkboxDrink&&n.push("Drinks"),t.formData.checkboxGaming&&n.push("Gaming Room"),t.formData.checkboxOvernight&&n.push("Overnight"),t.formData.checkboxPower&&n.push("Power"),0==n.length)return void alert("Please choose at least one keyword");let r=!0;t.openingTimes.forEach(o=>{if(1==o.state)for(let t in o)null==o[t]&&(r=!1);else o.day?(o.close="",o.open=""):r=!1}),r?o.post("/api/locations/addlocation",{name:e.name,type:e.type,keywords:n,address:e.address,rating:e.rating,longitude:e.longitude,latitude:e.latitude,discount:e.discount,imageLink:e.imageLink,openingTimes:t.openingTimes}).then(o=>{alert(o.data.msg)},o=>{throw new Error(o)}):alert("All fields are required!")})}angular.module("locator_app").controller("addLocationCtrl",o),o.$inject=["$http"]}(),function(){function o(o,t,e){let n=this,r=o.locationid;console.log(r),t.get("/api/locations/"+r).then(function(o){n.data=o.data.data},function(o){console.log(o)})}angular.module("locator_app").controller("locationDetailCtrl",o),o.$inject=["$routeParams","$http","$scope"]}(),function(){function o(o,t){t.get("/api/locations/type/study").then(function(t){o.locations=t.data.data},function(o){console.log(o)})}angular.module("locator_app").controller("studyCtrl",o),o.$inject=["$scope","$http"]}(),function(){function o(o,t){t.get("/api/locations/type/work").then(function(t){o.locations=t.data.data,console.log(o.data)},function(o){console.log(o)})}angular.module("locator_app").controller("workCtrl",o),o.$inject=["$scope","$http"]}(),function(){function o(o,t){t.get("/api/locations/type/dating").then(function(t){o.locations=t.data.data,console.log(o.data)},function(o){console.log(o)})}angular.module("locator_app").controller("datingCtrl",o),o.$inject=["$scope","$http"]}(),function(){angular.module("locator_app").directive("navigation",function(){return{restrict:"EA",templateUrl:"components/common/navigation.template.html"}})}(),function(){angular.module("locator_app").directive("myfooter",function(){return{restrict:"EA",templateUrl:"components/common/myfooter.template.html"}})}(),function(){angular.module("locator_app").directive("ratingStars",function(){return{restrict:"EA",scope:{thisRating:"=rating"},templateUrl:"components/common/ratingStars.template.html"}})}(),function(){function o(o,t,e){var n=this;n.credentials={email:"",password:""},n.returnPage=o.search().page||"/",n.onSubmit=function(){n.formError="",n.credentials.email&&n.credentials.password?n.doLogin():n.formError="All fields required, please try again!"},n.doLogin=function(){n.formError="",e.login(n.credentials).then(function(){})}}angular.module("locator_app").controller("loginCtrl",o),o.$inject=["$location","$http","authentication"]}(),function(){function o(o,t,e){var n=this;n.credentials={name:"",email:"",password:""},n.returnPage=o.search().page||"/",n.onSubmit=function(){n.formError="",n.credentials.name&&n.credentials.email&&n.password1&&n.password2?n.password1===n.password2?(n.credentials.password=n.password1,n.doRegister()):n.formError="Your password does not match, please try again!":n.formError="All fields required, please try again!"},n.doRegister=function(){n.formError="",e.register(n.credentials).then(function(){})}}angular.module("locator_app").controller("registerCtrl",o),o.$inject=["$location","$http","authentication"]}(),function(){function o(o,t){var e=function(o){t.localStorage["locator_app-token"]=o},n=function(){return t.localStorage["locator_app-token"]},r=function(){var o=n();return!!o&&JSON.parse(t.atob(o.split(".")[1])).exp>Date.now()/1e3};return{saveToken:e,getToken:n,register:function(t){return o.post("/api/register",t).then(o=>{e(o)},o=>{console.log(o.data.msg)})},login:function(t){return o.post("/api/login",t).then(o=>{e(o.data.data.jwt),console.log(o)},o=>{console.log(o.data.msg)})},logout:function(){t.localStorage.removeItem("locator_app-token")},isLoggedIn:r,currentUser:function(){if(r()){var o=n(),e=JSON.parse(t.atob(o.split(".")[1]));return{email:e.email,name:e.name}}}}}angular.module("locator_app").service("authentication",o),o.$inject=["$http","$window"]}();